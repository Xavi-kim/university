<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { background: white; padding: 20px 30px; border-radius: 12px; margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .header h1 { color: #667eea; font-size: 1.6em; }
        .btn-logout { padding: 10px 20px; background: #f44336; color: white; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; font-size: 0.9em; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .stat-card { background: white; padding: 24px; border-radius: 12px; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .stat-number { font-size: 2.8em; font-weight: 700; color: #667eea; }
        .stat-label { color: #666; margin-top: 4px; font-size: 0.95em; }
        .section { background: white; padding: 28px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 24px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .section-header h2 { color: #333; font-size: 1.3em; }
        .btn-add { padding: 10px 22px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.95em; text-decoration: none; display: inline-block; transition: transform 0.2s; }
        .btn-add:hover { transform: translateY(-2px); }
        table { width: 100%; border-collapse: collapse; }
        th { background: #f8f9ff; padding: 12px 14px; text-align: left; font-weight: 600; color: #555; font-size: 0.85em; text-transform: uppercase; border-bottom: 2px solid #e8ecff; }
        td { padding: 12px 14px; border-bottom: 1px solid #f0f0f0; color: #333; font-size: 0.95em; }
        tr:last-child td { border-bottom: none; }
        tr:hover td { background: #fafbff; }
        .btn-edit { padding: 6px 14px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; text-decoration: none; font-size: 0.85em; margin-right: 6px; display: inline-block; }
        .btn-delete { padding: 6px 14px; background: #f44336; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.85em; }
        .alert { padding: 14px 18px; border-radius: 8px; margin-bottom: 20px; font-weight: 500; }
        .alert-success { background: #d4edda; color: #155724; border-left: 4px solid #28a745; }
        .badge { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: 0.78em; font-weight: 600; }
        .badge-active { background: #d4edda; color: #155724; }
        .empty { text-align: center; padding: 40px; color: #999; }
    </style>
</head>
<body>
<div class="container">

    <!-- Header -->
    <div class="header">
        <h1>üéì –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
        <div style="display:flex; align-items:center; gap:16px;">
            <span>üëã <strong th:text="${userName}">Admin</strong></span>
            <a href="/auth/logout" class="btn-logout">–í—ã–π—Ç–∏</a>
        </div>
    </div>

    <!-- Alerts -->
    <div th:if="${param.success}" class="alert alert-success">
        <span th:if="${param.success[0] == 'course_created'}">‚úÖ –ö—É—Ä—Å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!</span>
        <span th:if="${param.success[0] == 'course_updated'}">‚úÖ –ö—É—Ä—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω!</span>
        <span th:if="${param.success[0] == 'course_deleted'}">‚úÖ –ö—É—Ä—Å —É–¥–∞–ª—ë–Ω!</span>
        <span th:if="${param.success[0] == 'professor_created'}">‚úÖ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!</span>
        <span th:if="${param.success[0] == 'professor_updated'}">‚úÖ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª—ë–Ω!</span>
        <span th:if="${param.success[0] == 'professor_deleted'}">‚úÖ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—ë–Ω!</span>
        <span th:if="${param.success[0] == 'university_created'}">‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!</span>
        <span th:if="${param.success[0] == 'university_updated'}">‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω!</span>
        <span th:if="${param.success[0] == 'university_deleted'}">‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç —É–¥–∞–ª—ë–Ω!</span>
    </div>

    <!-- Stats -->
    <div class="stats">
        <div class="stat-card">
            <div class="stat-number" th:text="${#lists.size(courses)}">0</div>
            <div class="stat-label">üìö –ö—É—Ä—Å–æ–≤</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" th:text="${#lists.size(professors)}">0</div>
            <div class="stat-label">üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" th:text="${#lists.size(universities)}">0</div>
            <div class="stat-label">üèõ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤</div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ –ö–£–†–°–´ ‚îÄ‚îÄ -->
    <div class="section">
        <div class="section-header">
            <h2>üìö –ö—É—Ä—Å—ã</h2>
            <a href="/admin/courses/new" class="btn-add">+ –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å</a>
        </div>
        <div th:if="${#lists.isEmpty(courses)}" class="empty">–ö—É—Ä—Å–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π!</div>
        <table th:unless="${#lists.isEmpty(courses)}">
            <thead>
                <tr>
                    <th>#</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ö–∞—Ñ–µ–¥—Ä–∞</th>
                    <th>–°–µ–º–µ—Å—Ç—Ä</th>
                    <th>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</th>
                    <th>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="c : ${courses}">
                    <td th:text="${c.id}"></td>
                    <td><strong th:text="${c.title}"></strong></td>
                    <td th:text="${c.department}"></td>
                    <td th:text="${c.semester}"></td>
                    <td th:text="${c.professor != null ? c.professor.name : '‚Äî'}"></td>
                    <td th:text="${c.university != null ? c.university.name : '‚Äî'}"></td>
                    <td>
                        <a th:href="@{/admin/courses/edit/{id}(id=${c.id})}" class="btn-edit">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</a>
                        <form th:action="@{/admin/courses/delete/{id}(id=${c.id})}" method="post" style="display:inline;">
                            <button type="submit" class="btn-delete" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å?')">üóë –£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ‚îÄ‚îÄ –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ò ‚îÄ‚îÄ -->
    <div class="section">
        <div class="section-header">
            <h2>üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</h2>
            <a href="/admin/professors/new" class="btn-add">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</a>
        </div>
        <div th:if="${#lists.isEmpty(professors)}" class="empty">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –ø–æ–∫–∞ –Ω–µ—Ç.</div>
        <table th:unless="${#lists.isEmpty(professors)}">
            <thead>
                <tr>
                    <th>#</th>
                    <th>–ò–º—è</th>
                    <th>Email</th>
                    <th>–ö–∞—Ñ–µ–¥—Ä–∞</th>
                    <th>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="p : ${professors}">
                    <td th:text="${p.id}"></td>
                    <td><strong th:text="${p.name}"></strong></td>
                    <td th:text="${p.email}"></td>
                    <td th:text="${p.department}"></td>
                    <td th:text="${p.university != null ? p.university.name : '‚Äî'}"></td>
                    <td>
                        <a th:href="@{/admin/professors/edit/{id}(id=${p.id})}" class="btn-edit">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</a>
                        <form th:action="@{/admin/professors/delete/{id}(id=${p.id})}" method="post" style="display:inline;">
                            <button type="submit" class="btn-delete" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è?')">üóë –£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ‚îÄ‚îÄ –£–ù–ò–í–ï–†–°–ò–¢–ï–¢–´ ‚îÄ‚îÄ -->
    <div class="section">
        <div class="section-header">
            <h2>üèõ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã</h2>
            <a href="/admin/universities/new" class="btn-add">+ –î–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</a>
        </div>
        <div th:if="${#lists.isEmpty(universities)}" class="empty">–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</div>
        <table th:unless="${#lists.isEmpty(universities)}">
            <thead>
                <tr>
                    <th>#</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ì–æ—Ä–æ–¥</th>
                    <th>–°—Ç—Ä–∞–Ω–∞</th>
                    <th>–í–µ–±-—Å–∞–π—Ç</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="u : ${universities}">
                    <td th:text="${u.id}"></td>
                    <td><strong th:text="${u.name}"></strong></td>
                    <td th:text="${u.city != null ? u.city : '‚Äî'}"></td>
                    <td th:text="${u.country != null ? u.country : '‚Äî'}"></td>
                    <td>
                        <a th:if="${u.website != null}" th:href="${u.website}" target="_blank" th:text="${u.website}"></a>
                        <span th:unless="${u.website != null}">‚Äî</span>
                    </td>
                    <td>
                        <a th:href="@{/admin/universities/edit/{id}(id=${u.id})}" class="btn-edit">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</a>
                        <form th:action="@{/admin/universities/delete/{id}(id=${u.id})}" method="post" style="display:inline;">
                            <button type="submit" class="btn-delete" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç?')">üóë –£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</div>
</body>
</html>

