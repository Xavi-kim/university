<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<nav class="navbar">
    <div class="container nav-container">
        <div class="logo">
            <h1>üéì –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</h1>
        </div>
        <ul class="nav-menu">
            <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a href="/dashboard">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a></li>
            <li><a href="/about">–û —Å–∏—Å—Ç–µ–º–µ</a></li>
            <li><a href="/logout">–í—ã—Ö–æ–¥</a></li>
        </ul>
    </div>
</nav>

<div class="container">
    <section class="hero">
        <h1>üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
        <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫—É—Ä—Å–∞–º–∏, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</p>
    </section>

    <section class="grid">
        <div class="card highlight">
            <h3>üìö –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏</h3>
            <p>–î–æ–±–∞–≤–ª—è–π—Ç–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏ —É–¥–∞–ª—è–π—Ç–µ –∫—É—Ä—Å—ã</p>
            <a href="/api/courses" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫—É—Ä—Å–∞–º</a>
        </div>
        <div class="card highlight">
            <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
            <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏</p>
            <a href="/api/users" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</a>
        </div>
        <div class="card highlight">
            <h3>üìã –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <p>–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫—É—Ä—Å–∞–º –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º</p>
            <a href="/stats" class="btn">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</a>
        </div>
    </section>

    <section class="card form">
        <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫—É—Ä—Å</h2>
        <form id="courseForm">
            <label>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç
                <input type="text" name="university" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞" required>
            </label>
            <label>–û—Ç–¥–µ–ª–µ–Ω–∏–µ
                <input type="text" name="department" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª–µ–Ω–∏—è" required>
            </label>
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞
                <input type="text" name="title" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞" required>
            </label>
            <label>–û–ø–∏—Å–∞–Ω–∏–µ
                <textarea name="description" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞" required rows="3"></textarea>
            </label>
            <label>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
                <input type="text" name="professor" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è" required>
            </label>
            <label>–°–µ–º–µ—Å—Ç—Ä
                <input type="text" name="semester" placeholder="–ü—Ä–∏–º–µ—Ä: –û—Å–µ–Ω—å 2026" required>
            </label>
            <button type="submit">–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å</button>
        </form>
    </section>

    <section class="card">
        <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫—É—Ä—Å—ã</h2>
        <div id="coursesList">
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–æ–≤...</p>
        </div>
    </section>

    <footer>
        <p>&copy; 2026 –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–º. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>
</div>

<script>
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫—É—Ä—Å—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        loadCourses();
        document.getElementById('courseForm').addEventListener('submit', handleCourseSubmit);
    });

    function loadCourses() {
        fetch('/api/courses')
            .then(response => response.json())
            .then(data => {
                const coursesList = document.getElementById('coursesList');
                if (data.length === 0) {
                    coursesList.innerHTML = '<p>–ö—É—Ä—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
                    return;
                }
                let html = '<table class="data"><thead><tr><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–û—Ç–¥–µ–ª–µ–Ω–∏–µ</th><th>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</th><th>–°–µ–º–µ—Å—Ç—Ä</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr></thead><tbody>';
                data.forEach(course => {
                    html += `<tr>
                        <td>${course.title}</td>
                        <td>${course.department}</td>
                        <td>${course.professor}</td>
                        <td>${course.semester}</td>
                        <td>
                            <button onclick="deleteCourse(${course.id})">–£–¥–∞–ª–∏—Ç—å</button>
                        </td>
                    </tr>`;
                });
                html += '</tbody></table>';
                coursesList.innerHTML = html;
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫—É—Ä—Å–æ–≤:', error);
                document.getElementById('coursesList').innerHTML = '<p>–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫—É—Ä—Å–æ–≤</p>';
            });
    }

    function handleCourseSubmit(e) {
        e.preventDefault();
        const formData = new FormData(e.target);
        const course = Object.fromEntries(formData);

        fetch('/api/courses', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(course)
        })
        .then(response => response.json())
        .then(data => {
            alert('–ö—É—Ä—Å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!');
            e.target.reset();
            loadCourses();
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞:', error);
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫—É—Ä—Å–∞');
        });
    }

    function deleteCourse(id) {
        if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫—É—Ä—Å?')) {
            fetch(`/api/courses/${id}`, {
                method: 'DELETE'
            })
            .then(response => {
                if (response.ok) {
                    alert('–ö—É—Ä—Å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!');
                    loadCourses();
                }
            })
            .catch(error => console.error('–û—à–∏–±–∫–∞:', error));
        }
    }
</script>
</body>
</html>

